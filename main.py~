#!/usr/bin/env python
 # -*- coding: utf-8 -*-
from PySide import QtCore, QtGui

import sys
import os
import signal
from PySide.QtCore import QObject
from PySide.QtGui import *
from PySide.QtDeclarative import *

import sms_sender

WINDOW_TITLE = "PySide Example"

# enable running this program from absolute path
os.chdir(os.path.dirname(os.path.abspath(__file__)))

def sigint_handler(*args):
  QApplication.quit()


class Sender(QObject):
	def __init__(self):
		QObject.__init__(self)
		self.rootObject = None

	@QtCore.Slot(str, str)
	def sendPoslatSMS(self, to, content):
		statusMsg = sms_sender.send_sms_poslatsms(to, "000000000", content)
		print statusMsg
		return statusMsg


if __name__ == '__main__':
	signal.signal(signal.SIGINT, signal.SIG_DFL)
	app = QApplication(sys.argv) # create the application
	view = QDeclarativeView() # create the declarative view
	# add Python properties to the
	# QML root context
	rc = view.rootContext()
	sender = Sender()
	rc.setContextProperty("sender", sender)

	view.setResizeMode(QDeclarativeView.SizeRootObjectToView)
	view.setSource("Main.qml")

	view.setWindowTitle(WINDOW_TITLE)
	view.window().showFullScreen()
	view.resize(480,854)
	#view.resize(854,480)
	view.show()
	sys.exit(app.exec_())








